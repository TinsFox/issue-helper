name: Issue Open Check

on:
  issues:
    types: [opened, edited]

jobs:
  check-issue:
    runs-on: ubuntu-latest
    steps:
      - uses: actions-cool/issues-helper@v2.2.0
        id: check
        with:
          actions: "check-issue"
          issue-number: ${{ github.event.issue.number }}
          title-excludes: "ğŸ›[BUG], ğŸ‘‘ [éœ€æ±‚], ğŸ§[é—®é¢˜]" # æ ‡é¢˜ç­‰äºè¿™äº›ä¸œè¥¿çš„æ—¶å€™å›å…³é—­issuesï¼Œè¯„è®ºissues

      - if: steps.check.outputs.check-result == 'false' && github.event.issue.state == 'open'
        uses: actions-cool/issues-helper@v2.2.0
        with:
          actions: "create-comment, close-issue"
          issue-number: ${{ github.event.issue.number }}
          body: |
            å½“å‰ Issue æœªæ£€æµ‹åˆ°æ ‡é¢˜ï¼Œè¯·è§„èŒƒå¡«å†™ï¼Œè°¢è°¢ï¼

            The title of the current issue is not detected, please fill in according to the specifications, thank you!

      - if: steps.check.outputs.check-result == 'true'
        uses: actions-cool/issues-similarity-analysis@v1.1.0
        with:
          filter-threshold: 0.6
          title-excludes: "ğŸ›[BUG], ğŸ‘‘ [éœ€æ±‚], ğŸ§[é—®é¢˜]"
          comment-title: "### ä»¥ä¸‹çš„ Issues å¯èƒ½ä¼šå¸®åŠ©åˆ°ä½  / The following issues may help you"
          show-footer: false

      - if: steps.check.outputs.check-result == 'true' && github.event.issue.state == 'open'
        uses: actions-cool/issues-helper@v2.2.0
        with:
          actions: "add-assignees, create-comment"
          token: ${{ secrets.GITHUB_TOKEN }}
          issue-number: ${{ github.event.issue.number }}
          assignees: "TinsFox"
          random-to: 1
          body: |
            æˆ‘ä»¬ä¼šå°½å¿«å¤„ç†issuesï¼Œè°¢è°¢ä½ çš„ä½¿ç”¨å’Œåé¦ˆ

            we will check this issues as soon as we can.
